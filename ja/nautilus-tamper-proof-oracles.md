[Sui Mainnet上のNautilusで改ざん防止Oracleを構築](https://blog.sui.io/nautilus-tamper-proof-oracles/)

## Sui Mainnet上のNautilusで改ざん防止Oracleを構築

NautilusがSui Mainnet上で稼働を開始し、Web3アプリに改ざん防止可能で検証可能なオフチェーン計算をもたらします。

* [![Sui Foundation](https://blog.sui.io/content/images/size/w100/2023/04/Sui_Droplet_Logo_Blue-3.png)](https://blog.sui.io/author/sui-foundation/)

![Sui Mainnet上のNautilusで改ざん防止Oracleを構築](https://blog.sui.io/content/images/size/w2000/2025/06/27-05-2-Blog-Header.png)

Web3インフラストラクチャの重要な要素である[Nautilus](http://sui.io/nautilus?ref=blog.sui.io)が、Sui Mainnet上で稼働を開始しました。Nautilusを使用することで、開発者はアプリ固有のオフチェーン計算を改ざん防止のTrusted Execution Environments（TEE、信頼できる実行環境）にオフロードでき、オフチェーンロジックの柔軟性を保ちながら、オンチェーン実行の暗号学的な信頼保証を維持できます。

現在のオフチェーン計算のほとんどは、不透明で検証できません。天候や価格フィードなどの外部データをオンチェーンに取り込むために使用されるOracleは、その代表例です。これらのシステムは通常、クローズドソースのインフラストラクチャに依存しており、ユーザーはデータが主張通りに処理され配信されていることを信頼しなければなりません。

Nautilusを使用することで、開発者は改ざん防止可能でオンチェーン上で検証可能なOracleとオフチェーンフローを作成できます。機密データ、重い計算、または実世界の入力を処理する必要があるすべてのアプリは、信頼性を損なうことなくこれを実現できるようになりました。

## オフチェーン計算は信頼のボトルネック

Oracleは、ブロックチェーンと現実世界をつなぐ結合組織として機能し、Web3インフラストラクチャの重要な部分です。これにより、Smart Contractは資産価格や気象条件からスポーツスコアやソーシャル活動まで、オフチェーンイベントに応答できます。しかし、その内部では、ほぼすべてがオフチェーン計算、つまりネットワークのセキュリティモデルの外で実行されるコードに依存しています。

ここに問題が始まります。オフチェーンシステムは検証が難しく、操作が容易です。ユーザーは、データを処理したサーバー、スクリプト、またはサードパーティプロバイダーを信頼するしかなく、実際に何が起こったのかを検査または監査する方法はありません。

ほとんどの場合、オフチェーンインフラストラクチャには以下が含まれます：

* 変更、設定ミス、または侵害される可能性のある中央集権的なサーバー。
* 検証可能な整合性や監査証跡を持たないAPIを解析したりデータをスクレイピングするBot。
* データがどのように収集または処理されたかの証明を提供しないWeb2サービスからの「私を信じて」という署名。

分散型Oracleネットワークでさえ、多くの場合不十分であり、検証可能性の問題を完全には解決せずに、レイテンシと複雑さを追加します。Web3がより本格的でデータ駆動型のユースケースにスケールするためには、オフチェーンロジックがそれを支えるブロックチェーンと同じくらい信頼できる必要があります。

## Nautilus：検証可能なオフチェーンロジックへの新しいアプローチ

[Nautilus](http://sui.io/nautilus?ref=blog.sui.io)は、この課題に正面から取り組むために構築されました。これは、TEE（[AWS Nitro Enclaves](https://aws.amazon.com/ec2/nitro/nitro-enclaves/?ref=blog.sui.io)から開始）を使用してWeb3で安全なオフチェーン計算を可能にし、Smart Contractを介して結果を直接オンチェーン上で検証します。

各Nautilusエンクレーブは、サービスプロバイダーが選択すれば、公開監査可能で暗号学的に測定される特定のコードを実行します。これは、誰でもデプロイされたソースコードを検査し、自分でその暗号学的プロパティを生成し、エンクレーブが主張する通りのものを正確に実行していること（それ以上でもそれ以下でもない）を確認できることを意味します。デプロイされると、エンクレーブは隔離された改ざん防止環境でそのコードを実行し、その整合性を証明するアテステーション（証明書）とともに署名された出力を生成します。

その署名された応答はSuiに送信され、オンチェーンのMove Smart Contractがアテステーションと応答自体の両方を検証します。すべてが正しければ（つまり、エンクレーブが登録されており、コードが期待される暗号学的プロパティと一致し、署名が有効である場合）、Smart Contractはデータを受け入れ、それに基づいて行動できます。

このフローは、Oracleとオフチェーン設計の新しい標準を作成します。改ざん防止で隔離されているだけでなく、エンドツーエンドで証明可能に透明で検証可能なロジックです。

## Nautilusで安全なOracleを構築

Nautilusを使用することで、開発者はオフチェーンデータがどのように処理されたかを正確に証明するOracleを作成できます。以下は、ステップバイステップで構築する方法です：

1. **データ取得ロジックを記述します。**

為替レートの取得、天気APIの読み取り、Twitterの投稿の検証など、Oracleに必要なロジックを定義することから始めます。このコードは安全なエンクレーブ内で実行されます。

2. **ロジックをNitro Enclaveにデプロイします。**

Nautilusフレームワークを使用して、コードをコンパイルしてAWS Nitro Enclaveで起動します。エンクレーブは、ロジックが安全かつ隔離された状態で実行されることを保証する改ざん防止ランタイムを提供します。

3. **エンクレーブをオンチェーンに登録します。**

デプロイされたら、[PCR値](https://docs.aws.amazon.com/enclaves/latest/user/set-up-attestation.html?ref=blog.sui.io)や公開鍵などのエンクレーブのアテステーションデータを、Move Smart Contractを使用してSuiに登録します。これにより、チェーンは後で応答が既知の信頼できるエンクレーブから来たことを検証できます。

4. **外部データを取得して署名します。**

エンクレーブは、オフチェーンデータを取得し、ロジックに従って処理し、アテステーションとともに出力に署名できるようになりました。

5. **結果をSuiに送信します。**

署名された結果をオンチェーンに送信し、Move Contractが有効な登録されたエンクレーブから来たことを検証します。検証されれば、Smart Contractは価格の更新、トークンのMint、支払いのトリガーなどのアクションを実行できます。

この基盤が整えば、開発者はパターンをさまざまなユースケースに適応させることができます。例としては以下が含まれます：

* Web APIから為替レートを取得し、AMM（Automated Market Maker、自動マーケットメーカー）を更新する**価格フィード**。
* 予測市場やソーシャルプラットフォームのための**評判またはスコアリングシステム**で、ランキングをプライベートに計算し、結果を公開でコミットします。
* **ジオロケーションまたは天気ベースのNFT**で、Oracleが報酬をMintする前に外部条件を検証します。
* **トラスト最小化されたソーシャルリンクフロー**で、オンチェーン資産転送をトリガーする前にユーザーのツイートやVenmo支払いを検証します。

## Sui Mainnet上で稼働開始

NautilusがSui Mainnet上で稼働開始したことで、開発者はついに、Oracleのようなオフチェーンシステムをデフォルトで検証可能に構築でき、パフォーマンス、柔軟性、またはユーザーの信頼を犠牲にすることはありません。外部データの統合、機密計算の処理、またはまったく新しいタイプのアプリの構築など、Nautilusは改ざん防止でオンチェーン検証可能にするためのツールを提供します。

これは新しいOracleフレームワークではなく、整合性が組み込まれた、Web3を現実世界に接続するための新しいモデルです。

[Nautilusドキュメント](https://docs.sui.io/concepts/cryptography/nautilus?ref=blog.sui.io)と[サンプルアプリ](https://github.com/MystenLabs/nautilus-twitter?ref=blog.sui.io)を参照して、今日から構築を始めましょう。

質問がある場合や、他のビルダーと議論したい場合は、[Discord](https://discord.com/channels/916379725201563759/1361500579603546223?ref=blog.sui.io)での会話に参加してください。
